{"formatVersion":"1.0","tagData":{"name":"meshblu_sbscrib","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAJYUlEQVR4Xu2cdYhUXxTHz9rdiordLXb/YWFjF3ZgN3Zjd2G3gootdgsWtmJ3dwt27Y/P4XcfM7OzOzMu64RzYFn2zZ337vnec84953vP25DQ0NBQCYqFQIi7gNy5c0eOHz8up06dkvv378vHjx/FV7EMCQmRBAkSSKZMmaR48eJSunRpyZo1q1vL7hKQS5cuyYwZM2Tbtm3y6tUrt27qa4NSpkwptWrVkl69ekn+/PkjnF64gPz69UtmzZolo0ePlnfv3vmajn80n6RJk8qwYcOkR48eEj16dKf3cArIt2/fpE+fPjJ37tw/erCvf6lLly4ybdo0iR07dpipOgWkf//+Mnny5DCDS5YsKdWrV5ciRYoIaOOrvijENqz6zJkzsmvXLjlx4kSYafbr108mTZrkGpDNmzdLw4YNBZcxkj59epkwYYLUr1/fKaq+CIqZE9a+ceNGGThwoDx69MiaKi6zfv16qVu3rt307Szk/fv3Uq5cObl8+bI1KHfu3PrFvHnz+rLeLud25coVXehr165ZY/PlyydHjhyRJEmSON92V65cKa1atbI+TJw4sezZs0dKlCjh8oH+MODkyZNSpUoV+fDhgzXdFStWSMuWLcMCgt/VqFFDfc5IeH7mD8qHN0fH+FitWjXZsWOHFQ8tl3n27JkmMY8fP9Z7xY8fX4MRZhVIQjhgc/j06ZOqlS5dOk0206RJo39bgJw+fVrKli0r379/1w/YSY4ePSpx4sQJJDzk69evqufZs2dVr1ixYqmexYoVswfk0KFDUqFCBUv5qlWr2rlPIKGCm+zevdtS6eDBg1K+fHl7QPbv3y+VK1e2BhFPtm/fHkg4WLrUrFlT44aRffv2SaVKlYKABAH5H4GAs5Dfv3/Lz58/JUaMGBItWjSP3TrgAJk6darMmzdPGjVqJOPGjQsCMnToUBk7dqy0bt1ali1bFgRk+PDhytO0bdtWlixZ4juAkN3u3LlTcubMKdmyZZMNGzaob1P7lCpVSshtzp8/r8kd5p0iRQq7yVMmXL16Va8VLFjQ2vr4m0SRTJlqNVGiRELuQNWNGEC6du2qvA05BXGF55oEKyKUoiyGkKdAzWXPnl2ff+vWLf2NAk2bNpUFCxZY86pYsaLSkHHjxtVsuFu3brJo0SKtIfhBod69eytxQ3Xdpk0bTa/JJBmfIUMGgZooXLiwBQjKsyim3ICjAWRXxWiUAYJ1kMAh0AYdOnSQESNGyN27d/XayJEjFZxBgwapUlyH+F21apU0b95cV3PNmjU6ltIca6K6XrhwoXIYVKLcH4YL65syZYqCZiyE72E5LVq0UGoQIpyAi9V4xUIMILgM9QAuwcrPmTNH2rdvrxbAylNAvXz5UuAkGNusWTNZvXq1jBkzRjB7BAJq4sSJqtj169fVSgANYpjCi/ukSpVKLcYAUqZMGSHt5hr3gfLs3r27csFeBYTVXbdunc6B1WRLxCrYEimmsmTJooAQLzgOwOwvXryo7sNxAcKxxpcvX6Rjx46Ce3Xu3FnevHmjn2XOnFkDaM+ePSVhwoQWIJ06ddJnIQMGDFBKEGBmz57tXUDq1aunJm4LCLwDK+4ICMEXH4fvZKULFCigq29YcJQvVKiQHnksXrxYAyuxB77GAGAspF27djoGMTyH3wGSI0cOtQLiBAGUmIAA6N69ewUliTfnzp3T4wKEXQRyG7CIE8SpUaNG6VifBASidtOmTTp5TH3+/Pli2DYsBEVevHihfCYxBMWJ9DFjxpTx48cLVOWQIUPkyZMnGn+WLl2qfAUxpEmTJkI1OnPmTN3Rtm7darmMbR7C8wi6uCz38EoMYUeAia9du7buHAgRntXv27ev7jIAAuv2+vVrdRNcBiHDHDx4sDx//lz/jhcvnq44ih84cEDjBQBSr5DbwOYRNIk/BGOCsBnP98leOWEEEGfHC7YARdm2i2lD2BLlWWUTHD9//qwUJD/4/tu3bzVOJEuWzO7EjOtPnz5V0NKmTas/RshBsBjOV8gvMmbMaB2B8BnPcBaUAZbnesVCInyqD38YZRbiwzoHLcSTxQlaiANaXgOEgEq2ye/kyZM7ZbcItoyhwGPM3zhA9xog7BCc76A0eQUKOwrVKmPIVDlEMruVJy7g6VivAgI1ACA3b94Mw4egCNsuYwDk4cOHdgfPnirq7nivAkJmSmsFpb+z1QcQxgAIvWu2J/HuKujpOK8DgrJksqTdJGFFixbVLJN4YQsIFgJ4ZKF095DO85tCj2uQRNQ3kY0zXgWE/hIyUrJZlAUQBE6UdJsYQsEHaDBfBFhIJLJQ6h/KffgR7kNNdOPGDa2BIiNeBwTFoAgo+qhh4C5Ir6lcEeobAwjg4ULwJPfu3dPfxB8AyZUrl1y4cMG/AUE5iB+UgvmCNIYkok6hioX7wCL+KUDYZTB1tl3chi6Dw4cPKyEMr+oKEMhrrCNgLITE7Pbt27rLUMrDklHaQ/wQYMMD5MGDB0oLwMXynYAABN9nl4BAgjeBE4Ghx1IAhaCJC9kGVdwMILAqznToAduyZYs2/sHM+3VQJeli58BdAASWnHyDIAsxTcA1gLDjwHXwN3wH8QWLwkJwO4Ci1dxvAYE8whpovid3IBdBGY4PYNVSp06tgBBTsJBjx47prgIVOH36dA3GuBMsHBwquxGEMyxaZMRr2y6T/vHjh7WiuA4rbhrcjFJcQ2wVxarYkTiL4Tr3ofUhvB51TwDyKiCeTPRvjQ0C4it8yN9acU+fE7SQP7GQYJ+qQ58qDSpsh0Rz5F/pZCYNYLsP08kML8EhtG2vO28P+PtrIY7xhSQPPW173dHTHJJZve7UGzSfcDxphJduOHsNJKFNA7LJCK+LUGQa0snuBaLly5drK5MR6DxKdAqwQBDqKNrXeVHKCPwM3YxG7ACBJedNAdMIxyAOqunmodL0Z4F1o7HH9m2xPHnyaOcTZ8dOAeEivVyNGzfWYsoI9QQn6nXq1Il0YfW3QWWToFKmoYai0ghlwNq1a6VBgwZ2UwrzViaxhFYGmlkchULNn97K5CyItx6wAkehYKSIdCSsnb6mChFMfwYVaSAK3ZL0oTh7OSrcN7sxNUpwGudsX9rzZ4Bg7GjSoY0rPE7F5bv/MFQAQwum6Qr0N1Agp3B1gIB0ikhcAmK+DJ1HRueP/x2CDBy2zR1xGxB3bhYIY4KAOKxiEJAgIBE79n8jRvye7On9zgAAAABJRU5ErkJggg==","description":"http経由でmeshbluのデバイスをsubscribeします。","functions":[{"id":"function_0","name":"meshblu","connector":{"inputs":[{"label":""}],"outputs":[{"label":""}]},"properties":[{"name":"uuid","referenceName":"myTriggerUuid","type":"string","defaultValue":"e2af7933-27ca-4ef4-82b5-25e2a647a453"},{"name":"token","referenceName":"myTriggerToken","type":"string","defaultValue":"4bb0777c"},{"name":"endpoint","referenceName":"myEndpoint","type":"string","defaultValue":"210.129.18.160"},{"name":"subscribeUuid","referenceName":"subscribeUuid","type":"string","defaultValue":"239b55a2-53d7-4ab6-b4b4-04e8bc109266"},{"name":"payloadKey","referenceName":"pKey","type":"string","defaultValue":"mesh"},{"name":"payloadValue","referenceName":"pValue","type":"string","defaultValue":"2"}],"extension":{"initialize":"","receive":"","execute":"var ip = messageValues.ip;\nif (ip != null) log(\"ip :\" + ip);\n\nvar endPointURL = 'http://'+properties.myEndpoint + '/subscribe/'+properties.subscribeUuid;\n\nlog(\"ready.\");\n\nvar length = 0;\nvar a=new XMLHttpRequest();\n  a.onreadystatechange=function()\n  {\n\t//log(\"readyState :\" + a.readyState);\n    //log(\"status :\" + a.status);\n    //log(\"statusText :\" + a.statusText);\n\n    if (a.responseText != null){\n      //log(a.responseText);\n      if (length !== a.responseText.length) {\n        length = a.responseText.length;\n        var lines = a.responseText.split(\"\\n\"),\n        line = lines[lines.length - 2];\n        if (line) {\n          var json = JSON.parse(line);\n          if (properties.pKey in json.payload && json.payload[properties.pKey] == properties.pValue){\n            log(properties.pKey + \" : \" + properties.pValue);\n\t\t\tcallbackSuccess( {\n     \t\t\t       resultType : 'continue'\n\t       \t} );\n\t\t//log(line);\n\t\t  }\n        }\n      }\n    }\n    //if(a.readyState==4&&a.status==200)\n    //{\n    //}\n  };\na.open(\"GET\",endPointURL);\na.setRequestHeader(\n  'meshblu_auth_uuid',\n  properties.myTriggerUuid);\na.setRequestHeader(\n  'meshblu_auth_token',\n  properties.myTriggerToken);\na.send(null); \n\nreturn {\n    resultType : 'pause'\n};","result":" \n\nreturn {\n    resultType : \"continue\"\n}\n"}}]}}
